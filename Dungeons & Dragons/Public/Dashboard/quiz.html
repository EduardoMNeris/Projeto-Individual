<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="shortcut icon" href="../Img/logo.png" type="image/x-icon">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../CSS/style.css">
  <title>Quiz</title>
</head>

<body>

  <div class="header">
    <div class="container">
      <a href="./dashboard.html"><img class="logo" src="../Img/logo.png"></a href="">
    </div>
  </div>

  <div class="sub-header">
    <a href="../index.html">Sair</a>
    <div class="subnav">
      <button class="subnavbtn">Comunidade<i class="fa fa-caret-down"></i></button>
      <div class="subnav-content">
        <a href="https://discord.com/channels/1116115519716737175/1116117516641640489">Associação</a>
        <a href="#team">Team</a>
        <a href="./mural.html">Forums</a>
      </div>
    </div>
    <div class="subnav">
      <button class="subnavbtn">Heróis<i class="fa fa-caret-down"></i></button>
      <div class="subnav-content">
        <a href="./quiz.html">Quiz</a>
        <a href="./dashboard.html">Criar um Personagem</a>
        <a href="#package">Meus Personagens</a>
        <a href="https://www.heroforge.com/" target="_blank">Hero Forge</a>
      </div>
    </div>
    <div class="subnav">
      <button class="subnavbtn">Simulador<i class="fa fa-caret-down"></i></button>
      <div class="subnav-content">
        <a href="./dado.html">Jogar os dados</a>
        <a href="./repetição.html">Estrutura de Repetição</a>
        <a href="./calculadora.html">Calculadora</a>
      </div>
    </div>
    <a href="gráficos.html">Analytics</a>
  </div>

  <div class="banner">
    <div class="container">
      <span class="info">Quiz de Personagem:</span>
      <span class="nav">Que classe eu devo interpretar?</span>
      <img src="../Img/personagens.png" alt="">
      <span class="nav-info">Faça este quiz para saber qual das cinco principais classes mais combina com você.
      </span>
    </div>

    <div class="quiz">
      <div class="blur info">
        <span>Escolha as Alternativas que Melhor te Classifiquem</span>
        <div class="pergunta">
          <select name="" id="select_p1">
            <option value="Guerreiro">Aventureiro</option>
            <option value="Barbaro">Introspectivo</option>
            <option value="Bardo">Curioso</option>
            <option value="Ladino">Ganancioso</option>
            <option value="Mago">Intuitivo</option>
          </select>
        </div>
        <div class="pergunta">
          <select name="" id="select_p2">
            <option value="Barbaro">Forte</option>
            <option value="Guerreiro">Resistente</option>
            <option value="Ladino">Habilidoso</option>
            <option value="Mago">Lógico</option>
            <option value="Bardo">Carismático</option>
          </select>
        </div>
        <div class="pergunta">
          <select name="" id="select_p3">
            <option value="Guerreiro">Paz</option>
            <option value="Mago">Conhecimento</option>
            <option value="Bardo">Fama</option>
            <option value="Ladino">Fortuna</option>
            <option value="Barbaro">Sobrevivência</option>
          </select>
        </div>
        <div class="pergunta">
          <select name="" id="select_p4">
            <option value="Ladino">Observador</option>
            <option value="Barbaro">Solitário</option>
            <option value="Bardo">Galanteador</option>
            <option value="Mago">Estudioso</option>
            <option value="Guerreiro">Companheiro</option>
          </select>
        </div>
      </div>
      <button onclick="resultado_quiz()">Simule Aqui</button>
      <div id="div_personagem"></div>
    </div>
  </div>

</body>

</html>

<script>

  var Resultado = 0;
  var classe = "";

  async function resultado_quiz() {
    Resultado = 0;

    var P1 = select_p1.value.toLowerCase();
    var P2 = select_p2.value.toLowerCase();
    var P3 = select_p3.value.toLowerCase();
    var P4 = select_p4.value.toLowerCase();

    var respostasUsuario = {
      pergunta1: P1,
      pergunta2: P2,
      pergunta3: P3,
      pergunta4: P4
    }


    if (P1 == 'guerreiro') {
      Resultado += 1;
    }
    else if (P1 == 'barbaro') {
      Resultado += 2;
    }
    else if (P1 == 'ladino') {
      Resultado += 3;
    }
    else if (P1 == 'bardo') {
      Resultado += 4;
    }
    else {
      Resultado += 5;
    }




    if (P2 == 'guerreiro') {
      Resultado += 1;
    }
    else if (P2 == 'barbaro') {
      Resultado += 2;
    }
    else if (P2 == 'ladino') {
      Resultado += 3;
    }
    else if (P2 == 'bardo') {
      Resultado += 4;
    }
    else {
      Resultado += 5;
    }



    if (P3 == 'guerreiro') {
      Resultado += 1;
    }
    else if (P3 == 'barbaro') {
      Resultado += 2;
    }
    else if (P3 == 'ladino') {
      Resultado += 3;
    }
    else if (P3 == 'bardo') {
      Resultado += 4;
    }
    else {
      Resultado += 5;
    }



    if (P4 == 'guerreiro') {
      Resultado += 1;

    }
    else if (P4 == 'barbaro') {
      Resultado += 2;
    }
    else if (P4 == 'ladino') {
      Resultado += 3;
    }
    else if (P4 == 'bardo') {
      Resultado += 4;
    }
    else {
      Resultado += 5;
    }



    if (Resultado <= 4) {
      classe = "Guerreiro";
      div_personagem.innerHTML = `<div class="img3"></div><span>There's two main reasons why the fighter is one of the most popular classes in Dungeons & Dragons: they're easy to pick up and they're effective. Your selection of subclasses in the Player’s Handbook allow you to create the warring legend of your dreams — be a mounted knight, a deadly bowman, a warrior-caster hybrid, or something else.</span>`
    }
    else if (Resultado <= 8) {
      classe = "Barbaro";
      div_personagem.innerHTML = '<div class="img"></div><span>Bárbaros, independente de quão diferentes sejam, são definidos por sua fúria: Inigualável, insuperável e invencível. Mais do que uma mera emoção, essa raiva é a ferocidade de um predador encurralado, a fúria implacável da tempestade, a ira infinita do mar. Para alguns sua fúria vem da comunhão com espíritos, para outros é uma reserva de ira contra um mundo repleto de dor. Para cada bárbaro a fúria é um poder que não apenas rega seu frenesi de batalha, mas também seus reflexos, resiliência e feitos de força.</span>'
    }
    else if (Resultado <= 12) {
      classe = "Ladino";
      div_personagem.innerHTML = '<div class="img5"></div><span>Ladinos contam com sua perícia, furtividade e as vulnerabilidades de seus inimigos para obter vantagem em qualquer situação. Eles possuem uma habilidade especial para encontrar a solução para praticamente qualquer problema, demonstrando desenvoltura e versatilidade, a chave de qualquer grupo aventureiro de sucesso. Como aventureiros, os ladinos pendem para ambos os lados da lei. Alguns são criminosos calejados que decidiram procurar sua fortuna em montes de tesouros, enquanto outros levam uma vida de aventura para escapar da lei. Alguns aprenderam e aperfeiçoaram suas perícias com o propósito explícito de se infiltrar em ruínas antigas e criptas escondidas na busca de tesouros.</span>'
    }
    else if (Resultado <= 16) {
      classe = "Bardo";
      div_personagem.innerHTML = `<div class="img2"></div><span>Seja escolástico, skald ou espertalhão, o Bardo tece sua magia através de palavras e música para inspirar aliados, desmoralizar inimigos, manipular mentes, criar ilusões e até mesmo curar ferimentos. O bardo é um artista que se utiliza de magia para aprimorar a sua arte. Estes personagens são reconhecidos por sua versatilidade no campo de batalha, podendo atuar relativamente bem como atacante e defensor, um ótimo controlador, mas se destacando verdadeiramente como um excelente apoiador.</span>`
    }
    else if (Resultado <= 20) {
      classe = 'Mago';
      div_personagem.innerHTML = '<div class="img4"></div><span>Wizards are the iconic spell-slingers of Dungeons & Dragons. They have the biggest selection of spells available and have numerous specializations that allow them to either focus on one of the particular schools of magic, or a particular facet of spellcasting. WIth a huge array of spells, and a great variety of subclasses, wizards are one the most flexible and most advanced classes in the game.</span>'
    }


    respostasUsuario['resultado'] = classe;
    // var resultadoFetch = await inserirResultadoQuiz(respostasUsuario.resultado);
    // var fkResultado = resultadoFetch.insertId;
    // var responseInserirRespostasQuiz = await inserirRespostasQuiz(respostasUsuario, fkResultado);
    // var fkQuiz = responseInserirRespostasQuiz.insertId;

    // await atualizarRespostasUsuario(sessionStorage.ID_USUARIO, fkResultado, fkQuiz);

  }

  function salvarResultado() {
        var idResultado = sessionStorage.ID_RESULTADO;

        var corpo = {
            resultado: classe.value
        }

        fetch(`/resultado/salvarResultado/${idResultado}`, {
            method: "post",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(corpo)
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
        });

        return false;

  }

</script>